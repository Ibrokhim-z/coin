<template>
  <div class="auth-page">
    <el-card class="auth-card">
      <h2>¬ÆÔ∏è –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h2>
      <p class="subtitle">–°–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–π –∞–∫–∫–∞—É–Ω—Ç –ª—é–±–æ–π —Ä–æ–ª–∏</p>

      <el-form label-position="top">
        
        <el-form-item label="–§–ò–û">
          <el-input v-model="form.fullname" placeholder="–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω" />
        </el-form-item>

        <el-form-item label="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –ª–æ–≥–∏–Ω">
          <el-input v-model="form.username" placeholder="user123" />
        </el-form-item>

        <el-form-item label="–ü–∞—Ä–æ–ª—å">
          <el-input v-model="form.password" type="password" show-password />
        </el-form-item>

        <el-form-item label="–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å (–¥–ª—è —Ç–µ—Å—Ç–∞)">
          <el-select v-model="form.role" placeholder="–ö—Ç–æ –≤—ã?" style="width: 100%">
            <el-option label="üë®‚Äçüéì –£—á–µ–Ω–∏–∫ (Student)" value="student" />
            <el-option label="üë®‚Äçüè´ –£—á–∏—Ç–µ–ª—å (Teacher)" value="teacher" />
            <el-option label="üëî –ú–µ–Ω–µ–¥–∂–µ—Ä (Manager)" value="manager" />
            <el-option label="üòé –ê–¥–º–∏–Ω (Admin)" value="admin" />
          </el-select>
        </el-form-item>

        <el-button type="primary" class="w-100" @click="handleRegister">
          –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
        </el-button>

        <div class="link">
          –£–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç? <router-link to="/login">–í–æ–π—Ç–∏</router-link>
        </div>
      </el-form>
    </el-card>
  </div>
</template>

<script setup>
import { reactive } from 'vue';
import { useRouter } from 'vue-router';
import { ElMessage } from 'element-plus';

const router = useRouter();

const form = reactive({
  fullname: '',
  username: '',
  password: '',
  role: 'student' // –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —É—á–µ–Ω–∏–∫
});

const handleRegister = () => {
  // –ò–ú–ò–¢–ê–¶–ò–Ø –†–ï–ì–ò–°–¢–†–ê–¶–ò–ò (–ë–ï–ó –ë–≠–ö–ï–ù–î–ê)
  // –ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ "–ø–æ–Ω–∞—Ä–æ—à–∫—É" –≤ –±—Ä–∞—É–∑–µ—Ä, —á—Ç–æ–±—ã –õ–æ–≥–∏–Ω –∏—Ö —É–≤–∏–¥–µ–ª
  
  const fakeUser = {
    username: form.username,
    password: form.password,
    role: form.role,
    fullname: form.fullname
  };

  // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage (–≤—Ä–µ–º–µ–Ω–Ω–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞)
  localStorage.setItem('test_user', JSON.stringify(fakeUser));

  ElMessage.success(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ${form.role} —Å–æ–∑–¥–∞–Ω! –¢–µ–ø–µ—Ä—å –≤–æ–π–¥–∏—Ç–µ.`);
  router.push('/login');
};
</script>

<style scoped>
.auth-page { display: flex; justify-content: center; align-items: center; height: 100vh; background: #f0f2f5; }
.auth-card { width: 400px; }
.subtitle { color: gray; margin-bottom: 20px; font-size: 14px; }
.w-100 { width: 100%; margin-top: 10px; font-weight: bold; }
.link { text-align: center; margin-top: 15px; font-size: 14px; }
</style>